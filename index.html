<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<script src="https://code.jquery.com/jquery-2.1.3.min.js" type="text/javascript"></script>
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
	    var container = document.getElementById('main');

	    var inbox = document.createElement('div');
	    inbox.className = ("inbox");
	    inbox.innerHTML = "You have " + inboxCount() + " geemails.";
	    container.appendChild(inbox);

	    function inboxCount(){
	    	return window.geemails.length + displayMessage.length;
	    }

      	function displayMessage(msg){
      		var container = document.getElementById('main');

	        var geemailContent = document.createElement('div');
	        geemailContent.className = ("geemailContent");
	        container.appendChild(geemailContent);     

	        var row = document.createElement('div');
	        row.className = ("row");
 	        geemailContent.appendChild(row);

	        var sender = document.createElement('div');
	        sender.className = ("sender");
	        sender.innerHTML = "From: " + msg.sender;
	        row.appendChild(sender);

	        var date = document.createElement('div');
	        date.className = ("date");
	        date.innerHTML = msg.date;
	        row.appendChild(date);     

	        var subject = document.createElement('div');
	        subject.className = ("subject");
	        subject.innerHTML = msg.subject;
	        row.appendChild(subject);   

	        var messageRow = document.createElement('div');
	        messageRow.className = ("messageRow");
	        messageRow.innerHTML = msg.body;
	        geemailContent.appendChild(messageRow);    
      	}

      	$('#main').on("click",".geemailContent",function(){
    		$(this).children('.messageRow').slideToggle("fast");		
      	});

      	function addNewMessage(){
    		var newMessage = getNewMessage();
    		displayMessage(newMessage);
    		console.log("new message logged");
    	};

    	var interval = setInterval(addNewMessage(), 1000);
 	
        for (var i = 0; i < window.geemails.length; i++) {
        	displayMessage(window.geemails[i]);    
      	};

	    console.log('out');

	  };

    </script>
    	<title>gee-mail</title>
	</head>
	<body>
		<div class="header" role="banner">
			<div class="header_text">
				<h1>inbox</h1>
			</div>
			</div>
		<div class="container" id="main">
		</div>
	</body>
</html>